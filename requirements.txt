# MindGraph - AI-Powered Diagram Generation Platform
# Version: 4.28.36 (see VERSION file for current version)
# Python 3.8+ Required (3.13+ Recommended for Best Async Performance)
#
# INSTALLATION INSTRUCTIONS:
#   1. pip install -r requirements.txt
#   2. playwright install chromium  # Install Playwright browser binaries
#   3. Copy .env.example to .env and configure settings
#
# PRODUCTION DEPLOYMENT NOTES:
#   - Review and configure all environment variables in .env
#   - Set feature flags (FEATURE_MINDMATE, FEATURE_VOICE_AGENT, etc.)
#   - Configure database URL for your environment
#   - Set DEBUG=False for production
#   - Optional: Configure Sentry DSN for error tracking
#
# LAST UPDATED: 2025-01-10 - Updated to latest compatible versions

# ============================================================================
# WEB FRAMEWORK
# ============================================================================
fastapi>=0.128.0
uvicorn[standard]>=0.40.0
jinja2>=3.1.4
starlette>=0.50.0  # FastAPI dependency (explicit for version control)
pydantic>=2.12.5
pydantic-settings>=2.12.0
email-validator>=2.2.0  # Pydantic email validation
orjson>=3.11.5  # Fast JSON serialization for API responses

# ============================================================================
# HTTP & NETWORKING
# ============================================================================
aiohttp>=3.13.3
openai>=2.14.0
python-multipart>=0.0.21
httpx[http2]>=0.28.0  # Modern async HTTP client with HTTP/2 support
websockets>=14.2  # WebSocket support

# ============================================================================
# AI & LANGUAGE PROCESSING
# ============================================================================
# LangChain 1.x - Major upgrade with create_agent, LangGraph runtime, and middleware
langchain>=1.2.3
langchain-community>=0.4.1
langchain-core>=1.2.7
langchain-openai>=0.1.0  # Explicitly pin compatible version
langgraph>=1.0.5
langgraph-checkpoint>=3.0.1
dashscope>=1.25.7

# ============================================================================
# CONFIGURATION & ENVIRONMENT
# ============================================================================
PyYAML>=6.0.2
python-dotenv>=1.0.1

# ============================================================================
# ASYNC SUPPORT
# ============================================================================
nest_asyncio>=1.6.0
aiofiles>=24.1.0

# ============================================================================
# BROWSER AUTOMATION & IMAGE PROCESSING
# ============================================================================
playwright>=1.57.0
Pillow>=11.3.0

# ============================================================================
# SYSTEM MONITORING & UTILITIES
# ============================================================================
psutil>=7.2.1  # System resource monitoring
watchfiles>=1.0.0  # File watching for auto-reload

# ============================================================================
# DATABASE & AUTHENTICATION
# ============================================================================
SQLAlchemy>=2.0.45
alembic>=1.14.0  # Database migrations
python-jose[cryptography]>=3.3.0
bcrypt>=5.0.0  # Password hashing (direct bcrypt, passlib removed in v4.12.0)
captcha>=0.6
pycryptodome>=3.20.0  # AES decryption for bayi mode
# Note: Tencent SMS uses native async httpx calls (no SDK needed)

# ============================================================================
# CACHING (Redis - REQUIRED)
# ============================================================================
redis>=5.2.0  # Redis client for caching (captcha, rate limiting, sessions)
# Note: Updated for Redis 8.4 compatibility. Use latest version for best support.

# ============================================================================
# IP GEOLOCATION (Local Database - No External APIs)
# ============================================================================
py-ip2region>=3.0.2  # Local IP geolocation database (xdb format, loads into memory)
# Note: Database files (ip2region_v4.xdb and ip2region_v6.xdb) need to be placed in data/ directory
# Download from: https://github.com/lionsoul2014/ip2region

# ============================================================================
# CLOUD STORAGE (Optional)
# ============================================================================
cos-python-sdk-v5>=1.9.41  # Tencent Cloud Object Storage (COS) SDK for online backups

# ============================================================================
# PRODUCTION DEPLOYMENT (Optional but Recommended)
# ============================================================================
# gunicorn>=24.0.0  # WSGI server (not needed - uvicorn is async)
# python-json-logger>=3.2.1  # Structured JSON logging
# sentry-sdk[fastapi]>=2.20.0  # Error tracking - configure SENTRY_DSN in .env
# prometheus-fastapi-instrumentator>=7.0.0  # Prometheus metrics

# ============================================================================
# TESTING (Development/CI)
# ============================================================================
pytest>=9.0.2
pytest-asyncio>=1.3.0
pytest-cov>=6.0.0  # Code coverage
